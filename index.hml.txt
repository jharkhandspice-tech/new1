<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jharkhand Spice - Asli Swad</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Markdown Parser for AI responses -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        body {
            font-family: 'Poppins', sans-serif;
        }
        .hero-bg {
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://images.unsplash.com/photo-1596040033229-a9821ebd058d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80');
            background-size: cover;
            background-position: center;
        }
        .ai-bg {
            background-image: linear-gradient(rgba(127, 29, 29, 0.9), rgba(127, 29, 29, 0.9)), url('https://images.unsplash.com/photo-1556910103-1c02745a30bf?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80');
            background-size: cover;
            background-position: center;
        }
        .scanner-bg {
            background-image: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('https://images.unsplash.com/photo-1599909692063-e94c174d0315?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80');
            background-size: cover;
            background-position: center;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .toast {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 16px;
            position: fixed;
            z-index: 1;
            bottom: 30px;
            right: 30px;
            font-size: 17px;
            opacity: 0;
            transition: opacity 0.3s, bottom 0.3s;
        }
        .toast.show {
            visibility: visible;
            opacity: 1;
            bottom: 50px;
        }
        /* AI Response Styling */
        .prose h3 { font-size: 1.25rem; font-weight: 700; margin-top: 1rem; margin-bottom: 0.5rem; color: #7f1d1d; }
        .prose ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 1rem; }
        .prose p { margin-bottom: 0.75rem; }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #fbbf24;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Navigation -->
    <nav class="bg-red-800 text-white sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <i class="fas fa-pepper-hot text-yellow-400 text-2xl"></i>
                <span class="text-2xl font-bold">JharkhandSpice<span class="text-yellow-400">.in</span></span>
            </div>
            
            <div class="hidden md:flex space-x-8 font-medium">
                <a href="#home" class="hover:text-yellow-400 transition">Home</a>
                <a href="#products" class="hover:text-yellow-400 transition">Products</a>
                <a href="#ai-chef" class="text-yellow-300 hover:text-white transition font-bold"><i class="fas fa-magic mr-1"></i> AI Chef</a>
                <a href="#scanner" class="text-yellow-300 hover:text-white transition font-bold"><i class="fas fa-camera mr-1"></i> Scanner</a>
                <a href="#about" class="hover:text-yellow-400 transition">About Us</a>
                <a href="#contact" class="hover:text-yellow-400 transition">Contact</a>
            </div>

            <div class="flex items-center gap-4">
                <button class="relative hover:text-yellow-400 transition">
                    <i class="fas fa-shopping-cart text-xl"></i>
                    <span id="cart-count" class="absolute -top-2 -right-2 bg-yellow-400 text-red-800 text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </button>
                <button id="mobile-menu-btn" class="md:hidden text-2xl">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-red-900 pb-4">
            <a href="#home" class="block px-4 py-2 hover:bg-red-800">Home</a>
            <a href="#products" class="block px-4 py-2 hover:bg-red-800">Products</a>
            <a href="#ai-chef" class="block px-4 py-2 bg-red-950 text-yellow-400 font-bold">AI Chef âœ¨</a>
            <a href="#scanner" class="block px-4 py-2 bg-red-950 text-yellow-400 font-bold">Scanner ðŸ“·</a>
            <a href="#about" class="block px-4 py-2 hover:bg-red-800">About Us</a>
            <a href="#contact" class="block px-4 py-2 hover:bg-red-800">Contact</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <header id="home" class="hero-bg h-[500px] flex items-center justify-center text-center px-4">
        <div class="text-white max-w-3xl">
            <h1 class="text-4xl md:text-6xl font-bold mb-4">Jharkhand Ka Asli Swad</h1>
            <p class="text-xl mb-8 text-gray-200">Shuddh Masale aur Natural Oil, sidha khet se aapki rasoi tak.</p>
            <a href="#products" class="bg-yellow-500 text-red-900 px-8 py-3 rounded-full font-bold text-lg hover:bg-yellow-400 transition duration-300 shadow-lg inline-block">
                Abhi Order Karein
            </a>
        </div>
    </header>

    <!-- Categories -->
    <section class="py-12 bg-white">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                <div class="p-6 bg-red-50 rounded-xl border border-red-100">
                    <i class="fas fa-leaf text-4xl text-green-600 mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">100% Natural</h3>
                    <p class="text-gray-600">Bina kisi milawat ke, shuddh ingredients.</p>
                </div>
                <div class="p-6 bg-red-50 rounded-xl border border-red-100">
                    <i class="fas fa-mortar-pestle text-4xl text-red-600 mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">Hand Ground</h3>
                    <p class="text-gray-600">Paramparik tarike se kute gaye masale.</p>
                </div>
                <div class="p-6 bg-red-50 rounded-xl border border-red-100">
                    <i class="fas fa-shipping-fast text-4xl text-orange-600 mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">Fast Delivery</h3>
                    <p class="text-gray-600">Pure Jharkhand mein tez delivery.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-red-900 mb-4">Hamare Products</h2>
            <div class="flex justify-center gap-4 mb-12">
                <button onclick="filterProducts('all')" class="filter-btn active bg-red-800 text-white px-6 py-2 rounded-full hover:bg-red-700 transition">All</button>
                <button onclick="filterProducts('spice')" class="filter-btn bg-white text-red-800 border border-red-800 px-6 py-2 rounded-full hover:bg-red-50 transition">Masale</button>
                <button onclick="filterProducts('oil')" class="filter-btn bg-white text-red-800 border border-red-800 px-6 py-2 rounded-full hover:bg-red-50 transition">Oils</button>
            </div>

            <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                <!-- Products will be inserted here by JS -->
            </div>
        </div>
    </section>

    <!-- AI Chef Section -->
    <section id="ai-chef" class="py-16 ai-bg text-white">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto bg-white/10 backdrop-blur-md rounded-2xl p-8 border border-white/20 shadow-2xl">
                <div class="text-center mb-8">
                    <span class="bg-yellow-500 text-red-900 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide">Text AI</span>
                    <h2 class="text-3xl md:text-4xl font-bold mt-4 mb-2">AI Rasoi Expert âœ¨</h2>
                    <p class="text-gray-200">Aapke paas kaun se masale hain? Hamein batayein aur paayein swadisht recipes turant!</p>
                </div>

                <div class="flex flex-col gap-4">
                    <div class="relative">
                        <textarea id="recipe-input" rows="3" 
                            placeholder="Jaise: Mere paas Aloo, Jeera aur Haldi hai. Main kya bana sakta hoon?"
                            class="w-full p-4 rounded-xl bg-white/90 text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-4 focus:ring-yellow-400 resize-none text-lg"></textarea>
                    </div>
                    
                    <button onclick="askAIChef()" class="bg-yellow-500 hover:bg-yellow-400 text-red-900 font-bold py-4 rounded-xl transition transform hover:scale-[1.02] shadow-lg flex items-center justify-center gap-2 text-xl">
                        <span id="btn-text">Recipe Puchiye âœ¨</span>
                        <span id="btn-loader" class="loader hidden"></span>
                    </button>
                </div>

                <!-- Response Area -->
                <div id="ai-response-container" class="mt-8 hidden">
                    <div class="bg-white text-gray-800 rounded-xl p-6 shadow-inner relative">
                        <div class="absolute -top-3 left-6 bg-red-800 text-white px-3 py-1 rounded text-sm font-bold">Chef's Suggestion</div>
                        <div id="ai-response-text" class="prose max-w-none mt-2">
                            <!-- Response will appear here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- NEW: Masala Scanner Section (Vision API) -->
    <section id="scanner" class="py-16 scanner-bg text-white">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto">
                <div class="text-center mb-10">
                    <span class="bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide">Vision AI Powered</span>
                    <h2 class="text-3xl md:text-4xl font-bold mt-4 mb-4">Masala Pehchano ðŸ“·</h2>
                    <p class="text-xl text-gray-300">Koi anjaan masala mila? Photo upload karein, hum batayenge woh kya hai!</p>
                </div>

                <div class="bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col md:flex-row">
                    <!-- Upload Side -->
                    <div class="p-8 md:w-1/2 bg-gray-100 text-gray-800 flex flex-col items-center justify-center border-b md:border-b-0 md:border-r border-gray-200">
                        <div class="w-full mb-4">
                            <label for="spice-upload" class="flex flex-col items-center justify-center w-full h-64 border-2 border-red-300 border-dashed rounded-lg cursor-pointer bg-white hover:bg-red-50 transition">
                                <div class="flex flex-col items-center justify-center pt-5 pb-6" id="upload-placeholder">
                                    <i class="fas fa-cloud-upload-alt text-4xl text-red-400 mb-3"></i>
                                    <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Click to upload</span> or drag and drop</p>
                                    <p class="text-xs text-gray-500">PNG, JPG (Max 5MB)</p>
                                </div>
                                <img id="image-preview" class="hidden w-full h-full object-contain rounded-lg p-2" />
                                <input id="spice-upload" type="file" class="hidden" accept="image/*" onchange="previewImage(this)" />
                            </label>
                        </div>
                        <button onclick="identifySpice()" id="scan-btn" class="w-full bg-red-800 text-white font-bold py-3 rounded-lg shadow-lg hover:bg-red-700 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-search mr-2"></i> Scan Karein âœ¨
                        </button>
                    </div>

                    <!-- Result Side -->
                    <div class="p-8 md:w-1/2 bg-white flex flex-col">
                        <h3 class="text-xl font-bold text-red-900 mb-4 border-b pb-2">Result:</h3>
                        <div id="scan-result" class="flex-grow text-gray-600">
                            <div class="h-full flex flex-col items-center justify-center text-center opacity-50">
                                <i class="fas fa-magic text-4xl mb-2 text-gray-300"></i>
                                <p>Result yahan dikhega...</p>
                            </div>
                        </div>
                        <div id="scan-loader" class="hidden flex justify-center py-4">
                            <div class="loader border-red-200 border-t-red-800"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-16 bg-white">
        <div class="container mx-auto px-4 flex flex-col md:flex-row items-center gap-12">
            <div class="md:w-1/2">
                <img src="https://images.unsplash.com/photo-1509358271058-acd22cc93898?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80" alt="Spices Market" class="rounded-lg shadow-xl">
            </div>
            <div class="md:w-1/2">
                <h2 class="text-3xl font-bold text-red-900 mb-6">About Jharkhand Spice</h2>
                <p class="text-gray-700 mb-4 leading-relaxed">
                    Jharkhand Spice ek nayi soch ke sath shuru ki gayi company hai jo aapko ghar ke bane khane ka asli swad yaad dilayegi. Humare masale aur tel direct kisaano se laye gaye shuddh ingredients se bante hain.
                </p>
                <p class="text-gray-700 mb-6 leading-relaxed">
                    Humara mission hai ki har ghar mein chemical-free aur healthy khana pahuche. Chahe woh Turmeric (Haldi) ho ya Kachhi Ghani Mustard Oil, quality hamari pehchan hai.
                </p>
                <ul class="space-y-2 mb-8">
                    <li class="flex items-center text-gray-700"><i class="fas fa-check text-green-500 mr-2"></i> No Artificial Colors</li>
                    <li class="flex items-center text-gray-700"><i class="fas fa-check text-green-500 mr-2"></i> Freshly Packed</li>
                    <li class="flex items-center text-gray-700"><i class="fas fa-check text-green-500 mr-2"></i> FSSAI Certified</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 bg-red-900 text-white">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold mb-8">Contact Us</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <i class="fas fa-map-marker-alt text-3xl text-yellow-400 mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">Address</h3>
                    <p>Main Road, Ranchi,<br>Jharkhand, 834001</p>
                </div>
                <div>
                    <i class="fas fa-phone-alt text-3xl text-yellow-400 mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">Phone</h3>
                    <p>+91 98765 43210<br>+91 12345 67890</p>
                </div>
                <div>
                    <i class="fas fa-envelope text-3xl text-yellow-400 mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">Email</h3>
                    <p>info@jharkhandspice.in<br>sales@jharkhandspice.in</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-400 py-6 text-center">
        <p>&copy; 2025 Jharkhand Spice. All Rights Reserved.</p>
    </footer>

    <!-- Notification Toast -->
    <div id="toast" class="toast">Item added to cart!</div>

    <script>
        // ... existing product data and cart functions ...
        const products = [
            {
                id: 1,
                name: "Shuddh Haldi Powder",
                price: 65,
                unit: "200g",
                category: "spice",
                image: "https://images.unsplash.com/photo-1615485290382-441e4d049cb5?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
            },
            {
                id: 2,
                name: "Kachhi Ghani Mustard Oil",
                price: 185,
                unit: "1 Litre",
                category: "oil",
                image: "https://images.unsplash.com/photo-1474979266404-7eaacbcd87c5?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
            },
            {
                id: 3,
                name: "Teekha Lal Mirch",
                price: 80,
                unit: "200g",
                category: "spice",
                image: "https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
            },
            {
                id: 4,
                name: "Dhaniya Powder",
                price: 55,
                unit: "200g",
                category: "spice",
                image: "https://images.unsplash.com/photo-1599909692063-e94c174d0315?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
            },
            {
                id: 5,
                name: "Garam Masala Special",
                price: 120,
                unit: "100g",
                category: "spice",
                image: "https://images.unsplash.com/photo-1505252585461-04db1eb84625?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
            },
            {
                id: 6,
                name: "Refined Soyabean Oil",
                price: 150,
                unit: "1 Litre",
                category: "oil",
                image: "https://images.unsplash.com/photo-1620706857370-e1a89c852347?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
            },
            {
                id: 7,
                name: "Jeera (Cumin) Whole",
                price: 140,
                unit: "100g",
                category: "spice",
                image: "https://images.unsplash.com/photo-1596040033229-a9821ebd058d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
            },
            {
                id: 8,
                name: "Meat Masala",
                price: 75,
                unit: "100g",
                category: "spice",
                image: "https://images.unsplash.com/photo-1532336414038-51792328370f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
            }
        ];

        let cartCount = 0;

        // Render Products
        function renderProducts(filter = 'all') {
            const grid = document.getElementById('product-grid');
            // Prevent error if element is missing
            if (!grid) return;
            
            grid.innerHTML = '';
            
            const filteredProducts = filter === 'all' 
                ? products 
                : products.filter(p => p.category === filter);

            filteredProducts.forEach(product => {
                const card = `
                    <div class="product-card bg-white rounded-xl shadow-md overflow-hidden border border-gray-100 flex flex-col">
                        <div class="h-48 overflow-hidden relative">
                            <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover">
                            <span class="absolute top-2 right-2 bg-yellow-400 text-red-900 text-xs font-bold px-2 py-1 rounded shadow">
                                ${product.category === 'oil' ? 'Edible Oil' : 'Pure Spice'}
                            </span>
                        </div>
                        <div class="p-5 flex flex-col flex-grow">
                            <h3 class="text-lg font-bold text-gray-800 mb-1">${product.name}</h3>
                            <p class="text-sm text-gray-500 mb-4">Pack Size: ${product.unit}</p>
                            <div class="mt-auto flex items-center justify-between">
                                <span class="text-xl font-bold text-red-800">â‚¹${product.price}</span>
                                <button onclick="addToCart('${product.name}')" class="bg-red-800 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-700 transition flex items-center gap-2">
                                    Add <i class="fas fa-shopping-cart"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                grid.innerHTML += card;
            });
        }

        // Filter Function
        function filterProducts(category) {
            renderProducts(category);
            
            const buttons = document.querySelectorAll('.filter-btn');
            buttons.forEach(btn => {
                if (btn.getAttribute('onclick').includes(category)) {
                    btn.classList.remove('bg-white', 'text-red-800', 'border-red-800');
                    btn.classList.add('bg-red-800', 'text-white');
                } else {
                    btn.classList.add('bg-white', 'text-red-800', 'border-red-800');
                    btn.classList.remove('bg-red-800', 'text-white');
                }
            });
        }

        // Add to Cart Logic
        function addToCart(itemName) {
            cartCount++;
            document.getElementById('cart-count').innerText = cartCount;
            const toast = document.getElementById("toast");
            toast.innerText = `${itemName} added to cart!`;
            toast.className = "toast show";
            setTimeout(function(){ toast.className = toast.className.replace("show", ""); }, 3000);
        }

        // Mobile Menu Toggle
        const mobileBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Initial Render
        renderProducts();

        // === GEMINI API CONFIGURATION ===
        const apiKey = ""; // Provided by system

        // === FEATURE 1: AI CHEF (TEXT) ===
        async function askAIChef() {
            const input = document.getElementById('recipe-input').value;
            const responseContainer = document.getElementById('ai-response-container');
            const responseText = document.getElementById('ai-response-text');
            const btnLoader = document.getElementById('btn-loader');
            const btnText = document.getElementById('btn-text');

            if (!input.trim()) {
                alert("Kripya ingredients ya apna sawal likhein!");
                return;
            }

            btnText.innerText = "Chef Soch Rahe Hain...";
            btnLoader.classList.remove('hidden');
            responseContainer.classList.add('hidden');

            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            const systemPrompt = `
                You are an expert Indian Chef specializing in Jharkhandi cuisine and healthy cooking. 
                Suggest a delicious recipe or give health benefits based on user input.
                Use Hinglish (Hindi + English).
                Format the response in clean Markdown.
            `;

            const payload = {
                contents: [{ parts: [{ text: input }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] }
            };

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const data = await response.json();
                if (data.error) throw new Error(data.error.message);

                const aiText = data.candidates[0].content.parts[0].text;
                responseText.innerHTML = marked.parse(aiText);
                responseContainer.classList.remove('hidden');

            } catch (error) {
                console.error("Error:", error);
                responseText.innerHTML = `<p class="text-red-600">Error: ${error.message}</p>`;
                responseContainer.classList.remove('hidden');
            } finally {
                btnText.innerText = "Recipe Puchiye âœ¨";
                btnLoader.classList.add('hidden');
            }
        }

        // === FEATURE 2: MASALA SCANNER (VISION) ===
        let selectedFileBase64 = null;

        function previewImage(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('image-preview').src = e.target.result;
                    document.getElementById('image-preview').classList.remove('hidden');
                    document.getElementById('upload-placeholder').classList.add('hidden');
                    document.getElementById('scan-btn').disabled = false;
                    
                    // Store Base64 without the prefix for API
                    selectedFileBase64 = e.target.result.split(',')[1];
                }
                reader.readAsDataURL(file);
            }
        }

        async function identifySpice() {
            if (!selectedFileBase64) return;

            const resultDiv = document.getElementById('scan-result');
            const loader = document.getElementById('scan-loader');
            const btn = document.getElementById('scan-btn');

            // Set Loading State
            resultDiv.classList.add('hidden');
            loader.classList.remove('hidden');
            btn.disabled = true;
            btn.innerHTML = `<i class="fas fa-spinner fa-spin mr-2"></i> Pehchan Rahe Hain...`;

            // Endpoint for Vision (gemini-2.5-flash-preview-09-2025 supports image)
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{
                    role: "user",
                    parts: [
                        { text: "Identify this spice, herb, or food ingredient. Give me its name in Hindi and English. Explain its taste profile and one common usage in Indian cooking. Keep it concise and friendly in Hinglish." },
                        { inlineData: { mimeType: "image/jpeg", data: selectedFileBase64 } }
                    ]
                }]
            };

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const data = await response.json();
                if (data.error) throw new Error(data.error.message);

                const aiText = data.candidates[0].content.parts[0].text;
                
                // Display Result
                resultDiv.innerHTML = marked.parse(aiText);
                resultDiv.classList.remove('hidden');

            } catch (error) {
                console.error("Error:", error);
                resultDiv.innerHTML = `<p class="text-red-600 text-center">Scan fail ho gaya. Dobara try karein.</p>`;
                resultDiv.classList.remove('hidden');
            } finally {
                loader.classList.add('hidden');
                btn.disabled = false;
                btn.innerHTML = `<i class="fas fa-search mr-2"></i> Scan Karein âœ¨`;
            }
        }
    </script>
</body>
</html>
